<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Als Gast fortfahren</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <main class="card">
      <h1>Gast-Zugang</h1>
      <p class="text-muted">Gib deinen Namen ein, um als Gast fortzufahren.</p>

      <form id="guest-form" class="bg-soft" style="display:flex;flex-direction:column;gap:1rem;">
        <input id="guest-name" type="text" placeholder="Dein Name" required />
        <button type="submit" class="btn btn--ghost">Fortfahren</button>
      </form>

      <p id="status" class="text-muted"></p>
    </main>
  </div>

  <script>
    const form = document.getElementById("guest-form");
    const status = document.getElementById("status");

    form.addEventListener("submit", (e) => {
      e.preventDefault();
      const name = document.getElementById("guest-name").value.trim();

      if (!name) {
        status.textContent = "Bitte gib einen Namen ein.";
        return;
      }

      // Falls noch keine Gast-ID existiert â†’ neue UUID generieren
      let guestId = localStorage.getItem("guest_id");
      if (!guestId) {
        guestId = crypto.randomUUID();
        localStorage.setItem("guest_id", guestId);
      }

      // Gast-User speichern
      localStorage.setItem("user", JSON.stringify({
        id: guestId,
        name: name,
        guest: true
      }));

      status.textContent = "Weiterleitung...";
      setTimeout(() => window.location.href = "index1.html", 1000);
    });
  </script>
</body>
</html>
